function toggler(r,e){r.stopPropagation(),$(colorTable).show(),squareClicked=e;var o=$(squareClicked).offset().left,t=$(squareClicked).offset().top;$(colorTable).offset({left:o,top:t})}var colorGenerator=function(){for(var r=0;4>r;r++){var e=Math.floor(8*Math.random())+1,o="";switch(e){case 1:o="red";break;case 2:o="white";break;case 3:o="blue";break;case 4:o="pink";break;case 5:o="orange";break;case 6:o="purple";break;case 7:o="yellow";break;case 8:o="green";break;default:o="white"}colorArray[r]=o}console.log("generalt: "+colorArray)},COLOR_SECTION_HTML='<div class="row"><div class="col-xs-9 color-square-wrap"><span class="color-square white"></span><span class="color-square white"></span><span class="color-square white"></span><span class="color-square white"></span></div><div class="col-xs-3 result-wrap"><div><span class="result-square"></span><span class="result-square"></span></div><div><span class="result-square"></span><span class="result-square"></span></div></div></div>',colorSetter=function(){function r(r){var e=$(squareClicked).attr("class").split(/\s+/)[1];$(squareClicked).removeClass(e),$(squareClicked).addClass(r)}var e=$(".color");$(e).on("click",function(){var e=$(this).attr("class").split(/\s+/)[1];r(e)})},colorTableToggler=function(){$(colorTable).hide(),$(currentSquares).on("click",function(r){toggler(r,this)}),$(document).on("click",function(){$(colorTable).hide()})},controllingLogic=function(){function r(){for(var r={},t=[],a=0;a<u.length;a++){var l=colorArray.indexOf(u[a]),c=0;if(t[a]=!1,-1!==l)for(;t[a]===!1&&c<colorArray.length;)a==c&&colorArray[c]==u[a]&&(d[c]="green",t[c]=!0,r[u[a]]++),c++;else d[a]="white"}for(var s=0;s<colorArray.length;s++)-1!==colorArray.indexOf(u[s])&&(t[s]!==!1||!(r[u[s]]<f[u[s]])&&u[s]in r?t[s]===!1&&(d[s]="white"):(d[s]="red",r[u[s]]++));console.log("result: "+d),e(),o()}function e(){a(d);for(var r=0;r<d.length;r++)$(currentResultSquares[r]).addClass(d[r])}function o(){for(var r=!0,e=0;e<d.length;e++)"green"!==d[e]&&(r=!1);r===!1?t():($(i).css("display","block"),$(i).find("h2").html("nyertél"),c(0,400))}function t(){gameAttempt++,gameAttempt<=MAX_ATTEMPT?(u=[],d=[],$(colorSector).append(COLOR_SECTION_HTML),$(currentSquares).unbind("click"),window.currentSquares=$($(colorSector).children()[gameAttempt]).find(".color-square"),window.currentResultSquares=$($(colorSector).children()[gameAttempt]).find(".result-square"),$(currentSquares).on("click",function(r){toggler(r,this)}),$(s).html("Próbálkozás: "+gameAttempt+" / "+MAX_ATTEMPT),c($(n).offset().top-300,600)):($(i).css("display","block"),$(i).find("h2").html("vesztettél"),c(0,400))}function a(r){for(var e,o=r.length;o;o--)j=Math.floor(Math.random()*o),e=r[o-1],r[o-1]=r[j],r[j]=e}function l(r){for(var e={},o=0;o<r.length;o++){var t=r[o];e[t]=e[t]?e[t]+1:1}return e}function c(r,e){$("html, body").animate({scrollTop:r},e)}var s=$(".attempt-counter"),n=$(".control-btn"),i=$(".result"),u=[],d=[],f={};$(s).html("Próbálkozás: "+gameAttempt+" / "+MAX_ATTEMPT),$(n).on("click",function(){for(var e=0;4>e;e++)u[e]=$(currentSquares[e]).attr("class").split(/\s+/)[1];console.log("selected: "+u),f=l(colorArray),r()})};$(document).ready(function(){window.colorSector=$(".color-selector-wrap"),$(colorSector).append(COLOR_SECTION_HTML),window.gameAttempt=1,window.MAX_ATTEMPT=6,window.colorTable=$(".colors-container"),window.currentSquares=$($(colorSector).children()[gameAttempt]).find(".color-square"),window.currentResultSquares=$($(colorSector).children()[gameAttempt]).find(".result-square"),window.squareClicked=0,window.colorArray=[],colorGenerator(),colorTableToggler(),colorSetter(),controllingLogic()});